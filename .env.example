# ========================================
# TikTok Monitoring Worker Configuration
# ========================================

# ========================================
# WORKER CONFIGURATION (REQUIRED)
# ========================================

# REQUIRED: Static worker ID for job recovery after restart
# Must be unique for each monitoring worker instance
# Format: monitoring_worker_XX where XX is a unique identifier
MONITORING_WORKER_ID=monitoring_worker_01

# Worker heartbeat interval in seconds (default: 30)
WORKER_HEARTBEAT_INTERVAL_SECONDS=30

# Worker heartbeat timeout in seconds (default: 90)
# Workers are considered dead if no heartbeat received within this time
WORKER_HEARTBEAT_TIMEOUT_SECONDS=90

# Maximum concurrent monitoring jobs per worker (default: 100)
MAX_CONCURRENT_MONITORING_JOBS=100

# ========================================
# MONITORING CONFIGURATION
# ========================================

# Interval between live status checks in seconds (default: 30)
MONITORING_INTERVAL_SECONDS=30

# Interval for live detection in seconds (default: 60)
LIVE_DETECTION_INTERVAL_SECONDS=60

# User monitoring timeout in hours (default: 24)
# Note: Jobs persist 24/7/365 until all subscribers use /unmonitor
USER_MONITORING_TIMEOUT_HOURS=24

# ========================================
# HTTP & API CONFIGURATION
# ========================================

# Enable proxy rotation for API requests (default: true)
ENABLE_PROXY=true

# HTTP request timeout in seconds (default: 8)
HTTP_REQUEST_TIMEOUT_SECONDS=8

# HTTP connection timeout in seconds (default: 5)
HTTP_CONNECT_TIMEOUT_SECONDS=5

# Maximum retries for failed requests (default: 3)
MAX_RETRIES=3

# Delay between API requests in milliseconds (default: 1000)
API_REQUEST_DELAY_MS=1000

# Fallback to alternative protocol on error (default: true)
FALLBACK_ON_PROTOCOL_ERROR=true

# ========================================
# TIKTOK API CONFIGURATION
# ========================================

# TikTok API base URL (default: https://www.tiktok.com)
TIKTOK_API_BASE_URL=https://www.tiktok.com

# TikTok Live base URL (default: https://webcast.tiktok.com)
TIKTOK_LIVE_BASE_URL=https://webcast.tiktok.com

# Enable room ID caching (default: true)
ENABLE_ROOM_ID_CACHE=true

# Room ID cache TTL in minutes (default: 30)
ROOM_ID_CACHE_TTL_MINUTES=30

# Proxy rotation interval in minutes (default: 5)
PROXY_ROTATION_INTERVAL_MINUTES=5

# Proxy port range for IP rotation (default: 10000-60000 = 50K IPs)
# Each request uses a random port within this range for IP distribution
PROXY_PORT_MIN=10000
PROXY_PORT_MAX=60000

# Enable fallback API (default: true)
ENABLE_FALLBACK_API=true

# TikTokLive API key (optional)
TIKTOKLIVE_API_KEY=

# TikTokLive session ID (optional)
TIKTOKLIVE_SESSION_ID=

# ========================================
# REDIS CONFIGURATION
# ========================================

# Redis URL for job queue and worker coordination
REDIS_URL=redis://localhost:6379/0

# Redis maximum connections (default: 10)
REDIS_MAX_CONNECTIONS=10

# Redis connection timeout in seconds (default: 5)
REDIS_CONNECTION_TIMEOUT=5

# ========================================
# DATABASE CONFIGURATION
# ========================================

# PostgreSQL database URL
DATABASE_URL=postgresql://postgres:password@localhost:5432/tiktok_bot

# ========================================
# LOGGING CONFIGURATION
# ========================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
LOG_LEVEL=INFO

# Enable file logging (default: true)
ENABLE_FILE_LOGGING=true

# Log rotation days (default: 7)
LOG_ROTATION_DAYS=7

# ========================================
# DETERMINISTIC MODE (Testing Only)
# ========================================

# Enable deterministic recording for testing (default: false)
DETERMINISTIC_RECORDING=false

# Disable random delays for testing (default: false)
DISABLE_RANDOM_DELAYS=false

# Standardize timeouts for testing (default: false)
STANDARDIZE_TIMEOUTS=false

# Consistent retry intervals for testing (default: false)
CONSISTENT_RETRY_INTERVALS=false

# Fixed user agent index for testing (default: 0)
FIXED_USER_AGENT_INDEX=0
